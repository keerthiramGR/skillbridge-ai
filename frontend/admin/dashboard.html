<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard — SkillBridge AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/styles.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>

    <div class="animated-bg"></div>

    <nav class="navbar">
        <div style="display:flex;align-items:center;gap:1rem;">
            <button class="btn btn-icon btn-ghost" onclick="toggleSidebar()" style="display:none;" id="sidebarToggle"><i
                    data-lucide="menu"></i></button>
            <a href="../index.html" class="navbar-brand">
                <div class="logo-icon"><i data-lucide="brain-circuit"></i></div>
                <span>SkillBridge <span
                        style="background:var(--gradient-primary);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">AI</span></span>
            </a>
        </div>
        <div class="navbar-actions">
            <button class="theme-toggle" id="themeToggle"><i data-lucide="moon" id="themeIcon"></i></button>
            <div
                style="display:flex;align-items:center;gap:0.75rem;padding:0.5rem 1rem;background:var(--bg-glass);border:1px solid var(--border-glass);border-radius:var(--border-radius-full);">
                <img class="avatar avatar-sm" src="https://api.dicebear.com/7.x/avataaars/svg?seed=admin" alt="">
                <span style="font-size:0.85rem;font-weight:600;" id="userName">Admin</span>
            </div>
        </div>
    </nav>

    <div class="dashboard-layout">
        <aside class="sidebar" id="sidebar">
            <ul class="sidebar-nav">
                <li class="sidebar-section-title">Management</li>
                <li><a class="sidebar-link active" data-tab="tab-approvals" onclick="switchAdminTab(this)"><span
                            class="icon"><i data-lucide="user-check"></i></span> Recruiter Approvals</a></li>
                <li><a class="sidebar-link" data-tab="tab-users" onclick="switchAdminTab(this)"><span class="icon"><i
                                data-lucide="users"></i></span> User Management</a></li>
                <li><a class="sidebar-link" data-tab="tab-moderation" onclick="switchAdminTab(this)"><span
                            class="icon"><i data-lucide="shield"></i></span> Problem Moderation</a></li>

                <li class="sidebar-section-title">Analytics</li>
                <li><a class="sidebar-link" data-tab="tab-analytics" onclick="switchAdminTab(this)"><span
                            class="icon"><i data-lucide="bar-chart-3"></i></span> Platform Analytics</a></li>
            </ul>
            <div style="padding:1rem;">
                <button class="btn btn-ghost" style="width:100%;justify-content:flex-start;color:var(--danger-400);"
                    onclick="SessionManager.logout()">
                    <i data-lucide="log-out" style="width:18px;height:18px;"></i> Logout
                </button>
            </div>
        </aside>

        <main class="main-content">
            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-card-icon"
                            style="background:linear-gradient(135deg,rgba(99,102,241,0.2),rgba(139,92,246,0.2));color:var(--primary-400);">
                            <i data-lucide="users"></i></div>
                    </div>
                    <div class="stat-card-value">1,284</div>
                    <div class="stat-card-label">Total Users</div>
                    <div class="stat-card-trend up">↑ 156 this month</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-card-icon"
                            style="background:linear-gradient(135deg,rgba(14,165,233,0.2),rgba(59,130,246,0.2));color:var(--accent-400);">
                            <i data-lucide="briefcase"></i></div>
                    </div>
                    <div class="stat-card-value">42</div>
                    <div class="stat-card-label">Active Recruiters</div>
                    <div class="stat-card-trend up">↑ 8 new</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-card-icon"
                            style="background:linear-gradient(135deg,rgba(34,197,94,0.2),rgba(16,185,129,0.2));color:var(--success-400);">
                            <i data-lucide="file-text"></i></div>
                    </div>
                    <div class="stat-card-value">87</div>
                    <div class="stat-card-label">Active Problems</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <div class="stat-card-icon"
                            style="background:linear-gradient(135deg,rgba(245,158,11,0.2),rgba(239,68,68,0.2));color:var(--warning-400);">
                            <i data-lucide="clock"></i></div>
                    </div>
                    <div class="stat-card-value">6</div>
                    <div class="stat-card-label">Pending Approvals</div>
                </div>
            </div>

            <!-- Tab: Recruiter Approvals -->
            <div class="tab-panel active" id="tab-approvals">
                <div class="page-header">
                    <h1 class="page-title">Recruiter Approvals</h1>
                    <p class="page-subtitle">Review and approve pending recruiter registrations</p>
                </div>
                <div id="approvalsList" style="display:flex;flex-direction:column;gap:1rem;"></div>
            </div>

            <!-- Tab: User Management -->
            <div class="tab-panel" id="tab-users">
                <div class="page-header">
                    <h1 class="page-title">User Management</h1>
                    <p class="page-subtitle">Manage all platform users and their roles</p>
                </div>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Joined</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable"></tbody>
                    </table>
                </div>
            </div>

            <!-- Tab: Problem Moderation -->
            <div class="tab-panel" id="tab-moderation">
                <div class="page-header">
                    <h1 class="page-title">Problem Moderation</h1>
                    <p class="page-subtitle">Review and moderate problem statements</p>
                </div>
                <div id="moderationList" style="display:flex;flex-direction:column;gap:1rem;"></div>
            </div>

            <!-- Tab: Platform Analytics -->
            <div class="tab-panel" id="tab-analytics">
                <div class="page-header">
                    <h1 class="page-title">Platform Analytics</h1>
                    <p class="page-subtitle">Real-time platform insights and metrics</p>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;">
                    <div class="glass-card">
                        <h3 style="font-weight:700;margin-bottom:1rem;">User Growth</h3>
                        <canvas id="userGrowthChart" height="250"></canvas>
                    </div>
                    <div class="glass-card">
                        <h3 style="font-weight:700;margin-bottom:1rem;">Submissions by Domain</h3>
                        <canvas id="domainChart" height="250"></canvas>
                    </div>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-top:1.5rem;">
                    <div class="glass-card">
                        <h3 style="font-weight:700;margin-bottom:1rem;">Engagement Metrics</h3>
                        <canvas id="engagementChart" height="250"></canvas>
                    </div>
                    <div class="glass-card">
                        <h3 style="font-weight:700;margin-bottom:1rem;">Hiring Funnel</h3>
                        <canvas id="funnelChart" height="250"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <script src="../js/app.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/admin.js"></script>
    <script>
        lucide.createIcons();
        if (window.innerWidth <= 1024) document.getElementById('sidebarToggle').style.display = 'flex';
        window.addEventListener('resize', () => {
            document.getElementById('sidebarToggle').style.display = window.innerWidth <= 1024 ? 'flex' : 'none';
        });
    </script>
</body>

</html>